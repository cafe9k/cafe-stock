# CafeStock 项目概述

**创建日期**: 2024-12-14  
**文档版本**: v1.0.0

## 项目简介

CafeStock（酷咖啡股票助手）是一款基于 Electron + React 的本地化 A 股市场公告浏览器。通过离线数据库设计，提供极速、无延迟的公告阅读体验。

## 核心特性

### 1. 智能数据同步
- ✅ **启动自动同步**: 应用启动时自动检测并同步最新公告
- ✅ **增量更新**: 自动记录上次更新时间，只拉取最新的增量数据
- ✅ **历史回补**: 首次运行或数据缺失时，自动回补最近 30 天的数据
- ✅ **手动刷新**: 界面提供刷新按钮，触发强制同步和列表刷新

### 2. 财经资讯
- 📰 **多新闻源**: 支持新浪财经、华尔街见闻、同花顺、东方财富、云财经等主流财经网站
- ⚡ **实时获取**: 直接从 Tushare API 获取最新资讯，无需本地存储
- 📅 **时间筛选**: 支持今天、昨天、最近一周、最近一个月及自定义日期范围
- 📄 **分页浏览**: 每页显示 20 条资讯，支持翻页查看
- 📖 **内容展开**: 资讯内容支持展开查看完整信息

### 3. 本地化存储
- 💾 使用 **SQLite** (`better-sqlite3`) 存储所有公告数据
- 🚀 支持单次 2000 条的大批量数据写入
- 🔒 数据去重策略保证数据一致性

### 4. 极速浏览体验
- ⚡ **零延迟翻页**: 基于本地数据库分页查询，翻页无网络等待
- 📊 **单页 200 条**: 高密度信息展示，适合快速浏览
- 🎯 **精准搜索**: 支持按股票代码、标题关键词快速检索

### 5. 自动更新机制
- 🔄 **自动检测**: 应用启动时自动检查新版本
- 🖱 **手动检查**: 支持用户主动检查更新
- ⬇️ **后台下载**: 新版本在后台下载，不影响使用
- 🔧 **一键安装**: 下载完成后，一键重启安装新版本

## 核心架构

本项目采用 **"主进程同步 + 本地数据库 + 渲染进程展示"** 架构：

```
┌─────────────────────────────────────────────────────────┐
│                    Electron 主进程                        │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │  数据同步     │  │  SQLite DB   │  │  IPC 监听    │  │
│  │  Tushare API │  │  数据存储     │  │  事件处理    │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          ↕ IPC 通信
┌─────────────────────────────────────────────────────────┐
│                  Electron 渲染进程                        │
│  ┌──────────────────────────────────────────────────┐   │
│  │           React + TypeScript 应用                │   │
│  │  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐ │   │
│  │  │ 公告列表│  │ 资讯页面│  │ 数据洞察│  │ 设置页面│ │   │
│  │  └────────┘  └────────┘  └────────┘  └────────┘ │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 设计优势

1. **主进程负责数据**: 所有数据同步、数据库操作都在主进程完成，确保数据一致性
2. **渲染进程纯展示**: 前端只负责展示，不直接请求外部 API，性能更优
3. **本地数据库**: 使用 SQLite 实现离线浏览，无网络延迟
4. **IPC 通信**: 通过 Electron IPC 实现进程间安全通信

## 技术栈

### 核心框架
- **Electron** - 跨平台桌面应用框架
- **React 18** - UI 框架
- **TypeScript** - 类型安全的 JavaScript
- **Vite** - 现代化构建工具

### UI 框架
- **TailwindCSS** - 实用优先的 CSS 框架
- **Heroicons** - 高质量图标库

### 数据层
- **better-sqlite3** - 高性能同步 SQLite 数据库
- **Tushare Pro** - A 股数据 API 服务

### 工程化
- **electron-builder** - 应用打包工具
- **electron-updater** - 自动更新解决方案
- **ESLint + Prettier** - 代码质量和格式化

## 应用场景

1. **投资研究人员**: 快速浏览和检索上市公司公告，进行投资研究
2. **财经从业者**: 实时获取财经资讯，了解市场动态
3. **个人投资者**: 关注持仓股票的最新公告和资讯
4. **数据分析师**: 基于本地数据库进行数据分析和挖掘

## 系统要求

### 开发环境
- Node.js >= 18.x
- npm >= 9.x
- macOS 10.13+ / Windows 10+ / Linux

### 运行环境
- macOS 10.13+ (已打包)
- Windows 10+ (待支持)
- 至少 200MB 可用磁盘空间
- 需要网络连接（首次同步数据）

## 后续规划

- [ ] Windows 版本支持
- [ ] 股票代码搜索和筛选
- [ ] 公告内容全文搜索
- [ ] 数据导出功能（CSV、Excel）
- [ ] 自定义公告提醒
- [ ] 主题切换（暗色模式）
- [ ] 更多数据可视化功能

## 相关链接

- [开发指南](./development/development-guide.md)
- [API 文档](./api/ipc-api.md)
- [系统架构](./architecture/system-architecture.md)
